webpackJsonp([4],{"3Pce":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("pFYg"),n=s.n(r),a=s("woOf"),i=s.n(a),l=s("Dd8w"),o=s.n(l),c=s("NYxO"),u=s("eMjc"),d=s.n(u),m=s("P9l9"),h=s("i7Lb"),p={mixins:[h.a],props:{indexKey:{type:Number}},data:function(){return{answer:["1","2"],answerList:this.$parent.$parent.judgeArray[this.indexKey-1]}},created:function(){},mounted:function(){},methods:{aaaa:function(){console.log(this.answerList.list[1])},_collect:function(e){var t=this,s={collectObj:e,userId:sessionStorage.getItem("userId")};Object(m.c)(s).then(function(e){0==e.code?t.$message.success("收藏成功"):t.$message.success("收藏失败")})}}},f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",[s("el-form",{attrs:{model:e.answerList,"label-width":"100px"}},[s("el-row",[s("el-col",[s("p",{staticClass:"lettleTitle"},[e._v(e._s(e.indexKey)+".")])]),e._v(" "),s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{label:"题目:"}},[s("P",[e._v(e._s(e.answerList.name))])],1)],1),e._v(" "),e._l(Object.keys(e.answerList.list),function(t,r){return s("el-col",{key:"single"+r,attrs:{span:16}},[s("el-form-item",{attrs:{label:t+":"}},[s("P",[e._v(e._s(e.answerList.list[t]))])],1)],1)}),e._v(" "),s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{label:"答案:"}},[s("el-radio-group",{model:{value:e.answerList.useranswer,callback:function(t){e.$set(e.answerList,"useranswer",t)},expression:"answerList.useranswer"}},e._l(e.answer,function(e,t){return s("el-radio",{key:"answer"+t,attrs:{label:e}})}),1)],1)],1),e._v(" "),s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{label:"分数:"}},[s("P",[e._v(e._s(e.answerList.score))])],1)],1),e._v(" "),s("el-col",{attrs:{offset:2,span:4}},[s("el-button",{attrs:{type:"danger"},on:{click:function(t){return e._collect(e.answerList)}}},[e._v("收藏题目")])],1)],2)],1)],1)},staticRenderFns:[]},v=s("VU/8")(p,f,!1,null,null,null).exports,_={mixins:[h.a],props:{indexKey:{type:Number}},data:function(){return{answer:["A","B","C","D","E"],answerList:this.$parent.$parent.multipleChoiceArray[this.indexKey-1]}},created:function(){this.answerList.useranswer=[]},mounted:function(){},methods:{_collect:function(e){var t=this,s={collectObj:e,userId:sessionStorage.getItem("userId")};Object(m.c)(s).then(function(e){0==e.code?t.$message.success("收藏成功"):t.$message.success("收藏失败")})}}},w={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",[s("el-form",{attrs:{model:e.answerList,"label-width":"100px"}},[s("el-row",[s("el-col",[s("p",{staticClass:"lettleTitle"},[e._v(e._s(e.indexKey)+".")])]),e._v(" "),s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{label:"题目:"}},[s("p",[e._v(e._s(e.answerList.name))])])],1),e._v(" "),e._l(Object.keys(e.answerList.list),function(t,r){return s("el-col",{key:"single"+r,attrs:{span:16}},[s("el-form-item",{attrs:{label:t+":"}},[s("p",[e._v(e._s(e.answerList.list[t]))])])],1)}),e._v(" "),s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{label:"答案:"}},[s("el-checkbox-group",{model:{value:e.answerList.useranswer,callback:function(t){e.$set(e.answerList,"useranswer",t)},expression:"answerList.useranswer"}},e._l(e.answer,function(e,t){return s("el-checkbox",{key:"answr"+t,attrs:{label:e}})}),1)],1)],1),e._v(" "),s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{label:"分数:"}},[s("p",[e._v(e._s(e.answerList.score))])])],1),e._v(" "),s("el-col",{attrs:{offset:2,span:4}},[s("el-button",{attrs:{type:"danger"},on:{click:function(t){return e._collect(e.answerList)}}},[e._v("收藏题目")])],1)],2)],1)],1)},staticRenderFns:[]},g=s("VU/8")(_,w,!1,null,null,null).exports,y={mixins:[h.a],props:{indexKey:{type:Number}},data:function(){return{answer:["A","B","C","D"],answerList:this.$parent.$parent.singleChoiceArray[this.indexKey-1]}},created:function(){},mounted:function(){},methods:{fun:function(){console.log(this.answerList)},_collect:function(e){var t=this,s={collectObj:e,userId:sessionStorage.getItem("userId")};Object(m.c)(s).then(function(e){0==e.code?t.$message.success("收藏成功"):t.$message.success("收藏失败")})}}},b={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",[s("el-form",{attrs:{model:e.answerList,"label-width":"100px"}},[s("el-row",[s("el-col",[s("p",{staticClass:"lettleTitle"},[e._v(e._s(e.indexKey)+".")])]),e._v(" "),s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{label:"题目:"}},[s("p",[e._v(e._s(e.answerList.name))])])],1),e._v(" "),e._l(Object.keys(e.answerList.list),function(t,r){return s("el-col",{key:"single"+r,attrs:{span:16}},[s("el-form-item",{attrs:{label:t+":"}},[s("p",[e._v(e._s(e.answerList.list[t]))])])],1)}),e._v(" "),s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{label:"答案:"}},[s("el-radio-group",{model:{value:e.answerList.useranswer,callback:function(t){e.$set(e.answerList,"useranswer",t)},expression:"answerList.useranswer"}},e._l(e.answer,function(e,t){return s("el-radio",{key:"answer"+t,attrs:{label:e}})}),1)],1)],1),e._v(" "),s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{label:"分数:"}},[s("p",[e._v(e._s(e.answerList.score))])])],1),e._v(" "),s("el-col",{attrs:{offset:2,span:4}},[s("el-button",{attrs:{type:"danger"},on:{click:function(t){return e._collect(e.answerList)}}},[e._v("收藏题目")])],1)],2)],1)],1)},staticRenderFns:[]},L=s("VU/8")(y,b,!1,null,null,null).exports,C={mixins:[h.a],props:{indexKey:{type:Number}},data:function(){return{answerList:this.$parent.$parent.subJectiveArray[this.indexKey-1]}},created:function(){},mounted:function(){},methods:{fun:function(){console.log(this.answerList)},_collect:function(e){var t=this,s={collectObj:e,userId:sessionStorage.getItem("userId")};Object(m.c)(s).then(function(e){0==e.code?t.$message.success("收藏成功"):t.$message.success("收藏失败")})}}},A={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",[s("el-form",{attrs:{model:e.answerList,"label-width":"100px"}},[s("el-row",[s("el-col",[s("p",{staticClass:"lettleTitle"},[e._v(e._s(e.indexKey)+".")])]),e._v(" "),s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{label:"题目:"}},[s("p",[e._v(e._s(e.answerList.name))])])],1),e._v(" "),s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{label:"答案:"}},[s("el-input",{attrs:{type:"textarea"},model:{value:e.answerList.useranswer,callback:function(t){e.$set(e.answerList,"useranswer",t)},expression:"answerList.useranswer"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{label:"分数:"}},[s("p",[e._v(e._s(e.answerList.score))])])],1),e._v(" "),s("el-col",{attrs:{offset:2,span:4}},[s("el-button",{attrs:{type:"danger"},on:{click:function(t){return e._collect(e.answerList)}}},[e._v("收藏题目")])],1)],1)],1)],1)},staticRenderFns:[]},x={props:{},components:{"x-judge":v,"x-multiple-choice":g,"x-single-choice":L,"x-sub-jective":s("VU/8")(C,A,!1,null,null,null).exports},data:function(){return{singleChoiceArray:[],multipleChoiceArray:[],judgeArray:[],subJectiveArray:[],testpaperList:{name:"",time:"",score:"",studentScore:0},answerArr:[],takePhoto:"",full:1,dialogVisible:!1,saveShijuan:!1,oldWidth:"",falg:!0,upsess:!1}},mounted:function(){var e=this;this.echo(),this.takePhoto=this.randomArr(60*this.testpaperList.time),this.callCamera(),this.checkCodeCountDown(60*this.testpaperList.time);var t=this;document.oncontextmenu=function(){return!1},setTimeout(function(){e.oldWidth=document.body.clientHeight,window.onresize=function(){t.winChange()}},500)},methods:o()({echo:function(){if(this.$route.params.data){var e=JSON.parse(this.$route.params.data);this.singleChoiceArray=e.answerList.singleChoiceArray,this.multipleChoiceArray=e.answerList.multipleChoiceArray,this.judgeArray=e.answerList.judgeArray,this.subJectiveArray=e.answerList.subJectiveArray,this.testpaperList={name:e.name,time:e.time,score:e.score,studentScore:0}}},winChange:function(){document.body.clientHeight!=this.oldWidth&&(console.log(document.body.clientHeight),this.full>=2?this._saveAnswer():(this.full++,this.falg&&(this.dialogVisible=!0,this.fullScreen())))},checkCodeCountDown:function(e){var t=this;0==e?(this.$message.info("考试结束"),this.saveShijuan=!0):e-- >=0&&setTimeout(function(){var s=Math.floor(e/60),r=Math.floor(e%60);t.takePhoto.includes(e)&&t.photograph(),t.$refs.time.innerHTML=s+"分"+r+"秒",t.falg&&t.checkCodeCountDown(e)},1e3)}},Object(c.b)({saveProductState:"SAVEPRODUCTSTATE",saveProductID:"SAVEPRODUCTID"}),{addControl:function(e,t){this[t].push(i()(this.DeepClone(this[e]),{key:(new Date).getTime()}))},DeepClone:function(e){if(null===e||"object"!==(void 0===e?"undefined":n()(e)))return e;var t=e instanceof Array?[]:{};for(var s in e)t[s]=this.DeepClone(e[s]);return t},_saveAnswer:function(){var e=this,t={userId:sessionStorage.getItem("userId"),answerId:JSON.parse(this.$route.params.data).answerId,answer:{name:this.testpaperList.name,score:this.testpaperList.score,answerScore:this.testpaperList.studentScore,time:this.testpaperList.time,answerArr:this.answerArr,answerList:{singleChoiceArray:this.singleChoiceArray,multipleChoiceArray:this.multipleChoiceArray,judgeArray:this.judgeArray,subJectiveArray:this.subJectiveArray}}};this.falg=!1,Object(m.p)(t).then(function(t){0!=t.code&&e.$message.error(t.msg),e.$message.success(t.msg),e.upsess=!0})},randomNum:function(e,t){switch(arguments.length){case 1:return parseInt(Math.random()*e+1,10);case 2:return parseInt(Math.random()*(t-e+1)+e,10);default:return 0}},randomArr:function(e){for(var t=[],s=parseInt(e/4),r=1;r<=4;r++)t.push(this.randomNum(s*(r-1),s*r));return t},fullScreen:function(){this.dialogVisible=!1;var e,t=document.documentElement,s=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;void 0===s&&this.$message({showClose:!0,message:"该浏览器不满足考试系统要求，请更换浏览器",type:"warning"}),void 0!==s&&s?s.call(t):void 0!==window.ActiveXObject&&(e=new ActiveXObject("WScript.Shell"))&&e.SendKeys("{F11}")},callCamera:function(){var e=this;navigator.mediaDevices.getUserMedia({video:!0}).then(function(t){e.$refs.video.srcObject=t,e.$refs.video.play()}).catch(function(t){e.$message.info("摄像头开启失败，请检查摄像头是否可用！")})},closeCamera:function(){this.$refs.video.srcObject&&(this.$refs.video.srcObject.getVideoTracks()[0].stop(),this.$refs.video.srcObject=null)},photograph:function(){var e=this;this.$refs.canvas.getContext("2d").drawImage(this.$refs.video,0,0,640,480),this.answerArr.push(this.$refs.canvas.toDataURL("image/jpeg",.15)),d()(document.body).then(function(t){e.answerArr.push(t.toDataURL("image/jpeg",.15))})}}),beforeRouteLeave:function(e,t,s){this.closeCamera(),this.upsess||this._saveAnswer(),document.oncontextmenu=function(){return!0},s()}},k={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("el-row",{staticClass:"control"},[s("el-col",[s("p",{staticClass:"smallTitle"},[e._v("答题信息")]),e._v(" "),s("el-form",{staticClass:"formStyle",attrs:{model:e.testpaperList}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"试题名称:"}},[s("span",[e._v(e._s(e.testpaperList.name))])])],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"考试时长(min):"}},[s("span",[e._v(e._s(e.testpaperList.time))])])],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"试题总分:"}},[s("span",[e._v(e._s(e.testpaperList.score))])])],1)],1)],1)],1),e._v(" "),s("el-row",[0!==e.singleChoiceArray.length||0!==e.multipleChoiceArray.length||0!==e.judgeArray.length||0!==e.subJectiveArray.length?s("section",[s("p",{staticClass:"smallTitle"},[e._v("试题信息")]),e._v(" "),0!==e.singleChoiceArray.length?s("section",{staticClass:"sectionBlock"},[s("el-row",{staticClass:"smallTitle"},[e._v("单选")]),e._v(" "),e._l(e.singleChoiceArray,function(e,t){return s("x-single-choice",{key:e.key,attrs:{indexKey:t+1}})})],2):e._e(),e._v(" "),0!==e.multipleChoiceArray.length?s("section",{staticClass:"sectionBlock"},[s("el-row",{staticClass:"smallTitle"},[e._v("多选")]),e._v(" "),e._l(e.multipleChoiceArray,function(e,t){return s("x-multiple-choice",{key:e.key,attrs:{indexKey:t+1}})})],2):e._e(),e._v(" "),0!==e.judgeArray.length?s("section",{staticClass:"sectionBlock"},[s("el-row",{staticClass:"smallTitle"},[e._v("判断")]),e._v(" "),e._l(e.judgeArray,function(e,t){return s("x-judge",{key:e.key,attrs:{indexKey:t+1}})})],2):e._e(),e._v(" "),0!==e.subJectiveArray.length?s("section",{staticClass:"sectionBlock"},[s("el-row",{staticClass:"smallTitle"},[e._v("主观题")]),e._v(" "),e._l(e.subJectiveArray,function(e,t){return s("x-sub-jective",{key:e.key,attrs:{indexKey:t+1}})})],2):e._e()]):s("section",[s("div",{staticClass:"noTopic"},[s("p",[e._v("暂无试题信息...")])])])]),e._v(" "),s("aside",{staticClass:"fixedBtn"},[s("canvas",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"canvas",attrs:{width:"640",height:"480"}}),e._v(" "),s("section",{staticClass:"rowbtn"},[s("span",{ref:"time"}),e._v(" "),e.upsess?e._e():s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e._saveAnswer()}}},[e._v("提交")])],1)]),e._v(" "),s("div",{staticClass:"canvasPos"},[s("video",{ref:"video",attrs:{width:"120",height:"80",autoplay:""}})]),e._v(" "),s("el-dialog",{attrs:{title:"警告",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("span",[e._v("检测到您有作弊嫌疑，累计两次将强制交卷")]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("继续答题")])],1)]),e._v(" "),s("el-dialog",{attrs:{title:"警告",visible:e.saveShijuan,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,width:"30%"},on:{"update:visible":function(t){e.saveShijuan=t}}},[s("span",[e._v("考试时间到，请提交试题")]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e._saveAnswer()}}},[e._v("交卷")])],1)])],1)},staticRenderFns:[]};var $=s("VU/8")(x,k,!1,function(e){s("BHLF")},"data-v-a0d31286",null);t.default=$.exports},BHLF:function(e,t){}});
//# sourceMappingURL=4.9be8df5dafd373897b57.js.map